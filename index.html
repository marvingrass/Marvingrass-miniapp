<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Marvingrass Exchange</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
* {
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
    background: black;
    color:white;
    overflow:hidden;
}

/* üî• –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–´–ô –§–û–ù */
.bg {
    position: fixed;
    width:100%;
    height:100%;
    background: url('https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExb3l5d2RrZ2Z1c2U1b3VxNjN4d3F5eHF5Z3Q3cG1tN2N6d2JqYiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/l0HlBO7eyXzSZkJri/giphy.gif') center/cover;
    filter: blur(18px) brightness(0.35);
    transform: scale(1.2);
}

/* –ö–û–ù–¢–ï–ô–ù–ï–† */
.container {
    position: relative;
    z-index: 2;
    max-width: 420px;
    margin:auto;
    padding:20px;
}

/* –ö–ê–†–¢–û–ß–ö–ê */
.card {
    margin-top:40px;
    background: rgba(15, 23, 42, 0.65);
    backdrop-filter: blur(25px);
    border-radius: 24px;
    padding: 22px;
    box-shadow: 0 10px 60px rgba(0,0,0,0.6);
    animation: slideUp 0.5s ease;
}

h1 {
    text-align:center;
    font-size:22px;
}

.subtitle {
    text-align:center;
    color:#94a3b8;
    font-size:13px;
    margin:5px 0 20px;
}

/* –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ */
.switch {
    display:flex;
    background:#020617;
    border-radius:14px;
    padding:6px;
    margin-bottom:20px;
}

.switch button {
    flex:1;
    border:none;
    background:none;
    color:#64748b;
    padding:12px;
    font-size:15px;
    border-radius:12px;
    transition:0.25s;
}

.switch .active {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    color:white;
    box-shadow: 0 0 25px rgba(59,130,246,0.5);
}

.label {
    font-size:13px;
    color:#94a3b8;
    margin-bottom:6px;
}

input, select {
    width:100%;
    padding:15px;
    border-radius:14px;
    border:none;
    margin-bottom:14px;
    font-size:16px;
    background:#020617;
    color:white;
}

/* –ë–õ–û–ö –ö–£–†–°–ê */
.rateBox {
    background: rgba(2,6,23,0.8);
    border-radius:16px;
    padding:16px;
    text-align:center;
    margin-bottom:16px;
    animation: fadeIn 0.3s ease;
}

.rate {
    font-size:18px;
    font-weight:bold;
    color:#22c55e;
    margin-top:5px;
}

/* –ö–ù–û–ü–ö–ê */
.submit {
    width:100%;
    padding:17px;
    border:none;
    border-radius:16px;
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color:white;
    font-size:17px;
    font-weight:bold;
    transition:0.2s;
}

.submit:active {
    transform: scale(0.96);
}

.footer {
    text-align:center;
    margin-top:18px;
    font-size:12px;
    color:#475569;
}

@keyframes slideUp {
    from { opacity:0; transform: translateY(20px); }
    to { opacity:1; transform: translateY(0); }
}

@keyframes fadeIn {
    from { opacity:0; }
    to { opacity:1; }
}
</style>
</head>

<body>

<div class="bg"></div>

<div class="container">
    <div class="card">

        <h1>Marvingrass Exchange</h1>
        <div class="subtitle">–û–±–º–µ–Ω –≤–∞–ª—é—Ç ‚Ä¢ USDT ‚Ä¢ RUB ‚Ä¢ KZT</div>

        <div class="switch">
            <button id="buyBtn" class="active" onclick="setType('buy')">–ö—É–ø–∏—Ç—å</button>
            <button id="sellBtn" onclick="setType('sell')">–ü—Ä–æ–¥–∞—Ç—å</button>
        </div>

        <div class="label">–°—É–º–º–∞</div>
        <input id="amount" type="number" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" oninput="calculate()">

        <div class="label">–û—Ç–¥–∞—ë—Ç–µ</div>
        <select id="from" onchange="calculate()">
            <option value="RUB">RUB</option>
            <option value="KZT">KZT</option>
            <option value="USDT">USDT</option>
        </select>

        <div class="label">–ü–æ–ª—É—á–∞–µ—Ç–µ</div>
        <select id="to" onchange="calculate()">
            <option value="USDT">USDT</option>
            <option value="RUB">RUB</option>
            <option value="KZT">KZT</option>
        </select>

        <div class="rateBox">
            <div>–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç</div>
            <div class="rate" id="rate">‚Äî</div>
        </div>

        <button class="submit" onclick="sendRequest()">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>

        <div class="footer">
            –û–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç –∫—É—Ä—Å –≤—Ä—É—á–Ω—É—é
        </div>

    </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let type = "buy";

/* üî• –¢–í–û–ò –ö–£–†–°–´ */
const rates = {
    RUB_USDT: 120,
    KZT_USDT: 525,
    USDT_RUB: 118,
    USDT_KZT: 520
};

function setType(t) {
    type = t;
    document.getElementById("buyBtn").classList.remove("active");
    document.getElementById("sellBtn").classList.remove("active");

    if(t === "buy") document.getElementById("buyBtn").classList.add("active");
    else document.getElementById("sellBtn").classList.add("active");

    calculate();
}

function calculate() {
    const amount = document.getElementById("amount").value;
    const from = document.getElementById("from").value;
    const to = document.getElementById("to").value;

    if(!amount) {
        document.getElementById("rate").innerText = "‚Äî";
        return;
    }

    let result = 0;

    if(from === "RUB" && to === "USDT") result = amount / rates.RUB_USDT;
    else if(from === "KZT" && to === "USDT") result = amount / rates.KZT_USDT;
    else if(from === "USDT" && to === "RUB") result = amount * rates.USDT_RUB;
    else if(from === "USDT" && to === "KZT") result = amount * rates.USDT_KZT;
    else result = amount;

    document.getElementById("rate").innerText =
        result.toFixed(2) + " " + to;
}

function sendRequest() {
    const amount = document.getElementById("amount").value;
    const from = document.getElementById("from").value;
    const to = document.getElementById("to").value;

    if(!amount) {
        alert("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É");
        return;
    }

    const data = { type, amount, from, to };

    tg.sendData(JSON.stringify(data));
    alert("‚úÖ –ó–∞—è–≤–∫–∞ —É–ª–µ—Ç–µ–ª–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É");
}
</script>

</body>
</html>